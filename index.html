<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Taxi & Mileage Credit Calculator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon-192.png" type="image/png">
  <meta name="theme-color" content="#ffffff">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background-color: #f9f9f9; }
    table { border-collapse: collapse; width: 100%; max-width: 600px; margin: 20px auto; background-color: white; }
    th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
    th { background-color: #f2f2f2; }
    input, select { width: 100%; padding: 5px; }
    .total { background-color: #e0ffe0; font-weight: bold; }
    .hidden { display: none; }
    h2, h4 { text-align: center; }
  </style>
</head>
<body>

<h2>ðŸš– Taxi & PH Calculators</h2>

<div style="text-align:center;">
  <label><strong>Choose Calculator:</strong></label>
  <select onchange="toggleCalculator(this.value)">
    <option value="standard"> Meter Price (Lancaster Tariff)</option>
    <option value="mileage">Mileage Credit (32090)</option>
  </select>
</div>

<!-- Standard Fare Calculator -->
<div id="standardCalc">
  <table>
    <tr>
      <td><strong>Distance in Miles</strong></td>
      <td><input type="number" id="miles" value="1" step="0.1" onchange="calculateFare()"></td>
    </tr>
    <tr>
      <td><strong>Tariff</strong></td>
      <td>
        <select id="tariff" onchange="calculateFare()">
          <option value="1">Tariff 1 â€“ Day</option>
          <option value="2">Tariff 2 â€“ Night/Bank Holiday</option>
          <option value="3">Tariff 3 â€“ Xmas/New Year</option>
        </select>
      </td>
    </tr>
    <tr>
      <td><strong>Distance in Yards</strong></td>
      <td id="yards"></td>
    </tr>
    <tr>
      <td><strong>Base Fare (Â£)</strong></td>
      <td id="baseFare"></td>
    </tr>
    <tr>
      <td><strong>Excess Distance (yards)</strong></td>
      <td id="excessYards"></td>
    </tr>
    <tr>
      <td><strong>Fare for Excess Distance (Â£)</strong></td>
      <td id="excessFare"></td>
    </tr>
    <tr class="total">
      <td><strong>Total Fare (Â£)</strong></td>
      <td id="totalFare"></td>
    </tr>
  </table>
  <h4 style="font-style: italic;">Note: This Total doesn't include luggage (20p) or traffic wait (20p per 40 secs)</h4>
</div>

<!-- Mileage Credit Calculator -->
<div id="mileageCalc" class="hidden">
  <table>
    <tr>
      <td><strong>Total Miles</strong></td>
      <td><input type="number" id="creditMiles" value="0" step="0.1" onchange="calculateCredit()"></td>
    </tr>
    <tr>
      <td><strong>Wait Time (minutes)</strong></td>
      <td><input type="number" id="waitTime" value="0" step="1" onchange="calculateCredit()"></td>
    </tr>
    <tr>
      <td><strong>Base Credit (Â£2.00 per mile for first 7 miles)</strong></td>
      <td id="baseCredit">Â£0.00</td>
    </tr>
    <tr>
      <td><strong>Excess Credit (Â£1.60 per mile for rest)</strong></td>
      <td id="excessCredit">Â£0.00</td>
    </tr>
    <tr>
      <td><strong>Wait Time Credit (Â£0.30 per minute)</strong></td>
      <td id="waitCredit">Â£0.00</td>
    </tr>
    <tr class="total">
      <td><strong>Total Credit (Â£)</strong></td>
      <td id="totalCredit">Â£0.00</td>
    </tr>
  </table>
</div>

<script>
  function toggleCalculator(type) {
    document.getElementById('standardCalc').classList.toggle('hidden', type !== 'standard');
    document.getElementById('mileageCalc').classList.toggle('hidden', type !== 'mileage');
  }

  function calculateFare() {
    const miles = parseFloat(document.getElementById("miles").value) || 0;
    const tariff = parseInt(document.getElementById("tariff").value);
    const baseYards = 880;
    const distanceYards = miles * 1760;
    let baseFare, extraRate;
    if (tariff === 1) { baseFare = 3.2; extraRate = 0.2; }
    else if (tariff === 2) { baseFare = 4.8; extraRate = 0.3; }
    else { baseFare = 6.4; extraRate = 0.4; }
    const excessYards = Math.max(0, distanceYards - baseYards);
    const excessUnits = Math.floor(excessYards / 160);
    const extraFare = excessUnits * extraRate;
    const total = (baseFare + extraFare).toFixed(2);
    document.getElementById("yards").textContent = distanceYards.toFixed(0);
    document.getElementById("baseFare").textContent = "Â£" + baseFare.toFixed(2);
    document.getElementById("excessYards").textContent = excessYards.toFixed(0);
    document.getElementById("excessFare").textContent = "Â£" + extraFare.toFixed(2);
    document.getElementById("totalFare").textContent = "Â£" + total;
  }

  function calculateCredit() {
    const miles = parseFloat(document.getElementById("creditMiles").value) || 0;
    const waitTime = parseInt(document.getElementById("waitTime").value) || 0;
    const baseMiles = Math.min(7, miles);
    const excessMiles = Math.max(0, miles - 7);
    const baseCredit = baseMiles * 2.00;
    const excessCredit = excessMiles * 1.60;
    const waitCredit = waitTime * 0.30;
    const totalCredit = baseCredit + excessCredit + waitCredit;
    document.getElementById("baseCredit").textContent = "Â£" + baseCredit.toFixed(2);
    document.getElementById("excessCredit").textContent = "Â£" + excessCredit.toFixed(2);
    document.getElementById("waitCredit").textContent = "Â£" + waitCredit.toFixed(2);
    document.getElementById("totalCredit").textContent = "Â£" + totalCredit.toFixed(2);
  }

  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }

  window.addEventListener('load', () => {
    calculateFare();
    calculateCredit();
  });
</script>

</body>
</html>
